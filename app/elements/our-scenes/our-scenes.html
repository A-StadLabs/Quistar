<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/core-ajax/core-ajax.html">
<link rel="import" href="../../bower_components/core-selector/core-selector.html">
<link rel="import" href="../../bower_components/core-item/core-item.html">
<link rel="import" href="../../bower_components/core-icon-button/core-icon-button.html">
<link rel="import" href="../../elements/our-quizcard/our-quizcard.html">
<link rel="import" href="../../elements/our-quiz/our-quiz.html">
<link rel="import" href="../../bower_components/core-animated-pages/core-animated-pages.html">
<link rel="import" href="../../bower_components/core-header-panel/core-header-panel.html">


<polymer-element name="our-scenes" attributes="">
<template>
  <core-ajax url="https://kwistet.firebaseio.com/.json" handleAs="json" id="getAjax" on-core-response="{{handleResponse}}" auto></core-ajax>
  <link rel="stylesheet" href="our-scenes.css">
  <core-animated-pages fit selected="" id="scenes">
  <section vertical layout center>
    <!-- <div id="logo-quispel" src=""></div> -->
    <h1>QUISPEL</h1>
    <p>kies een quiz</p>
    <core-selector id="quizSelector" valueattr="quizId" on-core-activate="{{selectQuiz}}">
    <template repeat="{{ quiz, i in quizzes }}">
      <our-quizcard quizTitel="{{ quiz.quiztitel }}" quizDescr="{{ quiz.quizdescr }}" quizId="{{i}}"></our-quizcard>
    </template>
          <p>Een productie van AStadLabs</p>

  </core-selector>


</section>
<section vertical layout center fit>
  <our-quiz quizObject="{{quizObject}}" id="ourquiz"></our-quiz>
</section>
</core-animated-pages>
</template>
<script>
  (function () {
    'use strict';

    Polymer({

        ready: function(){
           this.$.scenes.selected = 0;
           var that = this;
           this.$.ourquiz.addEventListener('overzicht', function(){
              that.$.scenes.selected = 0;
           });
        },
        // define element prototype here
        handleResponse: function(e){
          this.quizzes = e.detail.response;
        },

        selectQuiz: function(){
          this.quizSelected = this.$.quizSelector.selectedItem.quizId;
          this.quizObject = this.quizzes[this.quizSelected];
          this.$.scenes.selected = 1;
        }
      });

  })();
</script>
</polymer-element>
