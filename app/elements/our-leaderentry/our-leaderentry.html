<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/core-ajax/core-ajax.html">
<link rel="import" href="../../elements/image-upload/image-upload.html">


<polymer-element name="our-leaderentry" attributes="score quizobject quizId quizFBId">
  <template>
    <link rel="stylesheet" href="our-leaderentry.css">


   <core-ajax method="POST" id="entryPost" handleAs="json" data url="https://quistar.firebaseio.com/{{quizFBId}}/0/leaderboard.json">
</core-ajax>
      <input id="naam" value="{{nickname}}">
      <image-upload id="img1" dataurl="{{showme}}" maxw="100" maxh="100" label="Upload een avatar"></image-upload>
      <div class="button" on-tap="{{addLeaderboard}}">Bewaar mijn score</div>
  </template>
  <script>

  </script>
  <script>
    (function () {
      'use strict';

      Polymer({
        ready: function(){

        },

        addLeaderboard: function(){

        //this.leaderboard = this.quizobject.leaderboard;


        this.data = { "naam": this.nickname,
                      "avatar": this.showme,
                      "score": this.score
                    };
        this.data = JSON.stringify(this.data);
        
        this.$.entryPost.body = this.data;
        
        this.$.entryPost.go();
        this.hidden = true;
      }
      });

    })();
  </script>
</polymer-element>
